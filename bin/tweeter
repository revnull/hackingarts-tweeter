#!/usr/bin/env python

import sys
import time
from tweeter.reader import Reader
from tweeter.notify import spawn_notifier

def main(argv):
    queue = spawn_notifier()
    reader = Reader(argv[0], argv[1], argv[2])

    while True:
        if queue.qsize() < 20:
            print "refreshing queue"
            words = reader.all_words(argv[3])
            [queue.put(w) for w in words]
        time.sleep(5)

if __name__ == '__main__':
    try:
        main(sys.argv[1:])
    except KeyboardInterrupt:
        sys.exit(0)

